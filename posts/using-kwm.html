---
title: using kwm
author: A.I.
category: osx
language: zh
date: 2016-11-08
description: |
  * 一些废话（可跳过）前一段时间也算是好好的折腾了一下 Linux 桌面，然后深深地“迷上”了 i3，不过由于在水果本子上安装 Linux 不太顺利（懒）。所以工作的大部分时间还是用着先进系统，不停需要切换到鼠标点点点点点点点点点真的是很烦人，更不提先进系统上那先进的 Window 系统（每次切到 App 会把所有的窗口都拉到前面来）了。之前也有测试过各种试图在先进系统上模拟 i3 的应用，比如 
---

<div id="outline-container-orgf965984" class="outline-2">
<h2 id="orgf965984">一些废话（可跳过）</h2>
<div class="outline-text-2" id="text-orgf965984">
<p>
前一段时间也算是好好的折腾了一下 Linux 桌面，然后深深地“迷上”了 i3，不过由于在水果本子上安装 Linux 不太顺利（懒）。
</p>

<p>
所以工作的大部分时间还是用着先进系统，不停需要切换到鼠标点点点点点点点点点真的是很烦人，更不提先进系统上那先进的 Window 系统（每次切到 App 会把所有的窗口都拉到前面来）了。
</p>

<p>
之前也有测试过各种试图在先进系统上模拟 i3 的应用，比如 amethyst、slate 等等，怎么说呢&amp;#x2026;都&amp;#x2026;不好用&amp;#x2026;包括者别要说到的 kwm 之前也已经试过，当时相当不稳定，而且功能也不太全，不过这次尝试之后发现已经能用了，基本能有 1／3 用 i3 的时候那么爽了&amp;#x2026;
</p>

<p>
[GitHub](<a href="https://github.com/koekeishiya/kwm">https://github.com/koekeishiya/kwm</a>) 上非常详细的，最简单的当然是
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">brew</span> install koekeishiya/kwm/kwm
</pre>
</div>

<p>
启动/管理的最简单方法是用 [homebrew-services](<a href="https://github.com/Homebrew/homebrew-services">https://github.com/Homebrew/homebrew-services</a>):
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">brew</span> servies start/stop/restart kwm
</pre>
</div>

<p>
然后你就会发现你所有的 Window 开始跳来跳去了！Don't Panic!
</p>

<p>
在 Github 仓库里也有提供一个[example](<a href="https://github.com/koekeishiya/kwm/tree/master/examples">https://github.com/koekeishiya/kwm/tree/master/examples</a>) config, 不过好像现在的是简化版，大概是想让用户自行配置比较好吧，我这里是之前版本留下的比较完整的 [example](<a href="https://gist.github.com/merrickluo/b27fd1b69729d6e4bb8397a9a394b1ba">https://gist.github.com/merrickluo/b27fd1b69729d6e4bb8397a9a394b1ba</a>) 和我自己的一些修改，里面基本所有的选项都有注释。
</p>

<p>
所有可用的选项在[这里](<a href="https://koekeishiya.github.io/kwm/kwmc.html">https://koekeishiya.github.io/kwm/kwmc.html</a>)。
</p>

<p>
一些概念：
</p>

<blockquote>
<p>
space = i3 workspace
</p>

<p>
window = i3 window
</p>

<p>
display = 显示器
</p>
</blockquote>

<p>
然后下面是我自己用到的常用按键配置:
cmd+ctrl 当做 i3 的 mod
alt+ctrl 当作 i3 的 shift+mod
</p>
</div>
</div>

<div id="outline-container-org0de68d9" class="outline-2">
<h2 id="org0de68d9">同一个 space 下切换焦点</h2>
<div class="outline-text-2" id="text-org0de68d9">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+ctrl-h window <span style="color: #97365B;">-f</span> west
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+ctrl-l window <span style="color: #97365B;">-f</span> east
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+ctrl-j window <span style="color: #97365B;">-f</span> south
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+ctrl-k window <span style="color: #97365B;">-f</span> north
</pre>
</div>
</div>
</div>

<div id="outline-container-org1306036" class="outline-2">
<h2 id="org1306036">同一个 space 下交换焦点 window 的位置</h2>
<div class="outline-text-2" id="text-org1306036">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym ctrl+alt-h window <span style="color: #97365B;">-s</span> west
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym ctrl+alt-j window <span style="color: #97365B;">-s</span> south
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym ctrl+alt-k window <span style="color: #97365B;">-s</span> north
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym ctrl+alt-l window <span style="color: #97365B;">-s</span> east
</pre>
</div>
</div>
</div>

<div id="outline-container-org7988c1f" class="outline-2">
<h2 id="org7988c1f">切换 space，基本跟 Mission Control 一样，不过没有动画（important！）</h2>
<div class="outline-text-2" id="text-org7988c1f">
<pre class="example">
kwmc bindsym ctrl-1 space -fExperimental 1
kwmc bindsym ctrl-2 space -fExperimental 2
kwmc bindsym ctrl-3 space -fExperimental 3
kwmc bindsym ctrl-4 space -fExperimental 4
</pre>

<p>
需要注意的是这个功能会把 Mission Control 搞坏
</p>
</div>
</div>

<div id="outline-container-orge2f8790" class="outline-2">
<h2 id="orge2f8790">启动 prefix，类似 i3 的自定义 mode，在 prefix 状态下，所有快捷键有另外的用途</h2>
<div class="outline-text-2" id="text-orge2f8790">
<pre class="example">
// Activate prefix mode
kwmc bindsym cmd+ctrl+q mode activate prefix
</pre>
</div>
</div>

<div id="outline-container-orgb38ecb0" class="outline-2">
<h2 id="orgb38ecb0">切换焦点到不同的显示器</h2>
<div class="outline-text-2" id="text-orgb38ecb0">
<pre class="example">
kwmc bindsym cmd+ctrl+1 display -f 0
kwmc bindsym cmd+ctrl+2 display -f 1
</pre>
</div>
</div>

<div id="outline-container-org3146607" class="outline-2">
<h2 id="org3146607">轻量调整窗口宽度</h2>
<div class="outline-text-2" id="text-org3146607">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym prefix-h window <span style="color: #97365B;">-c</span> reduce <span style="color: #97365B; font-weight: bold;">0.05</span>
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym prefix-l window <span style="color: #97365B;">-c</span> expand <span style="color: #97365B; font-weight: bold;">0.05</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e02518" class="outline-2">
<h2 id="org4e02518">让 kwm 识别 Emacs 为普通窗口</h2>
<div class="outline-text-2" id="text-org4e02518">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> rule <span style="color: #842879;">owner</span>=<span style="color: #4F894C;">"Emacs"</span> <span style="color: #842879;">properties</span>=<span style="color: #3B6EA8;">{</span><span style="color: #842879;">role</span>=<span style="color: #4F894C;">"AXStandardWindow"</span><span style="color: #3B6EA8;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5445a23" class="outline-2">
<h2 id="org5445a23">有些需要 float 的窗口</h2>
<div class="outline-text-2" id="text-org5445a23">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> rule <span style="color: #842879;">properties</span>=<span style="color: #3B6EA8;">{</span><span style="color: #842879;">float</span>=<span style="color: #4F894C;">"true"</span><span style="color: #3B6EA8;">}</span> <span style="color: #842879;">owner</span>=<span style="color: #4F894C;">"App Store"</span>
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> rule <span style="color: #842879;">properties</span>=<span style="color: #3B6EA8;">{</span><span style="color: #842879;">float</span>=<span style="color: #4F894C;">"true"</span><span style="color: #3B6EA8;">}</span> <span style="color: #842879;">owner</span>=<span style="color: #4F894C;">"System Preferences"</span>
</pre>
</div>

<p>
可根据需求酌情添加
</p>
</div>
</div>

<div id="outline-container-orgffa073d" class="outline-2">
<h2 id="orgffa073d">差点忘了最重要的：随时随地启动 iTerm2</h2>
<div class="outline-text-2" id="text-orgffa073d">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd-return exec open <span style="color: #97365B;">-na</span> /Applications/iTerm2.app
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b5a864" class="outline-2">
<h2 id="org3b5a864">重启和重新加载配置</h2>
<div class="outline-text-2" id="text-org3b5a864">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+alt+ctrl-q quit
<span style="color: #5d86b6; font-weight: bold;">kwmc</span> bindsym cmd+alt+ctrl-r config reload
</pre>
</div>

<p>
这里上面一个命令虽然说是退出，但是因为我们是以 daemon 模式启动的，所以它会自动重启，我一般用这种方式来更新配置，因为下面一个命令按了之后 UI 没有反应，不知道有没有生效&amp;#x2026;
</p>

<p>
根据我这一两个星期的使用，大量使用的快捷键大概就这些了。
</p>
</div>
</div>

<div id="outline-container-org9db26a5" class="outline-2">
<h2 id="org9db26a5">Problems</h2>
<div class="outline-text-2" id="text-org9db26a5">
<p>
虽说现在已经到可用的程度，不过问题还是有一些的，比如有时候窗口跳来跳去，有些藏在后台的窗口会影响布局等&amp;#x2026;但是一般这种情况按下重启的快捷键也就好了&amp;#x2026;
</p>

<p>
现在拖后腿的反倒是用了 cVim 的 Chrome 呢，感觉不久后我又会启动一波 Firefox 体验活动了&amp;#x2026;
</p>
</div>
</div>
